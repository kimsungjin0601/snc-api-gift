<!-- <?xml version=“1.0” encoding=“UTF-8” ?> -->
<!DOCTYPE mapper   PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.snc.gift.mapper.OrderGiftMapper">
    <select id="getOrderUserCount" parameterType="OrderGiftUserSearch" resultType="Integer">
        select count(1)
        from order_gift t1
        where t1.user_no = #{userNo}
    </select>

    <select id="getOrderUserList" parameterType="OrderGiftUserSearch" resultType="OrderGiftVo">
        select t1.main_product_name
             , t1.order_status_cd
             , t2.code_name as order_status_name
             , t1.final_amount
             , t1.order_at
        from order_gift t1
             inner join common_code t2 on t1.order_status_cd = t2.code and t2.code_group = 'ORDER_STATUS'
        where t1.user_no = #{userNo}
        order by t1.order_no desc
        limit #{pageSize} offset #{offset}
    </select>
</mapper>
